<!DOCTYPE html>
<html>
  <head>
  <link href="styles/styles.css" rel="stylesheet" type="text/css">
  <script src="https://sdk.amazonaws.com/js/aws-sdk-2.652.0.min.js"></script>
    <!-- <meta http-equiv="Content-type" content="text/html; charset=utf-8">
    <title>Hello AWS Web World!</title -->
<script type="text/javascript">
//var AWS = require('aws-sdk');
//AWS.config.loadFromPath('./credentials');
 
AWS.config.update({
	  region: "us-east-2",
	  endpoint: 'http://dynamodb.us-east-2.amazonaws.com',
	  accessKeyId: "AKIASUU5L6BWABM3DQEC",
	  secretAccessKey: "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"
	});  
 
var dynamodb = new AWS.DynamoDB();
var docClient = new AWS.DynamoDB.DocumentClient();
var ddb = new AWS.DynamoDB({apiVersion: '2012-08-10'});
let slotMap=new Map();
slotMap["Slot1"]=0;
slotMap["Slot2"]=1;
function loadref(time)
{
	queryData("Slot1");
	//queryData("Slot2");
setTimeout("location.reload(true);",time);
} 

function queryData(slotId) {
	
    var params = {
        TableName : "SlotAvailability",
        ScanIndexForward: false,
        KeyConditionExpression: "#sname = :SensorName",
        ExpressionAttributeNames:{
            "#sname": "SensorName"
        },
        ExpressionAttributeValues: {
        	":SensorName":slotId
        }, 
        Limit:1 
    };
    docClient.query(params, function(err, data) {
        if (err) {
            
        } else {
        	
            data.Items.forEach(function(movie) {
                
                if(movie.Distance>20)
                {
                	document.getElementById('slottable').rows[1].cells[0].className="empty";
                	document.getElementById('slottable').rows[1].cells[SlotMap[slotId]].innerHTML="EMPTY"
                }
                else
                {
                	document.getElementById('slottable').rows[1].cells[0].className="full";
                	document.getElementById('slottable').rows[1].cells[slotMap[slotId]].innerHTML="FULL"
                }
            });
         
        }
    });
}
function loadReservationpage()
{
	window.location.href="Reservation.html";
	}
  </script>
  </head>
  <body onload="Javascript:loadref(10000)" style="background-image: url('images/Background Empty.jpg');no-repeat center center fixed; 
  -webkit-background-size: cover;
  -moz-background-size: cover;
  -o-background-size: cover;
  background-size: cover;">
  <header>
	 <div class="topnav">
	 <div align="left"> 
		 <a	class="active" id="home" href="availability.html" >HOME</a>	
          <a  id="about" href="About.html" >ABOUT</a>		
          <a  id="contact"href="Contact.html" >CONTACT US</a>
          </div>	
          <div style="left-padding:100px">
          <a  id="booking" href="Bookings.html">My Bookings</a>	
          <a  id="account"href="Myaccount.html" >My Account</a>		
		</div>
		</div>
</header>
  <div class="login100-more-avail" >
 <div align="center">
 </br>
 </br>
 </br>
</br>
 </br>
</br>
 
 <table id="slottable"  class="myTable"  >
  <tr>
    <th>Slot 1</th>
    <th>Slot 2</th>
    <th>Slot 3</th>
    <th>Slot 4</th>
    <th>Slot 5</th>
  </tr>
  <tr>
    <td></td>
    <td class="empty">EMPTY</td>
    <td class="empty">EMPTY</td>
    <td class="empty">EMPTY</td>
    <td class="empty">EMPTY</td>
  </tr>
</table>

</br>
</br>


<button align="center" class="button" onClick="loadReservationpage()";">Reserve Space</button>
</div>
</br>
</br>

  

</br>
</br>
</br>
</br>
</div>
  </body>
</html>